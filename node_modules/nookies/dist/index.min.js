"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,o=1,s=arguments.length;o<s;o++)for(var t in r=arguments[o])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var cookie=require("cookie"),setCookieParser=require("set-cookie-parser"),isBrowser=function(){return"undefined"!=typeof window};function hasSameProperties(e,r){var o=Object.getOwnPropertyNames(e),s=Object.getOwnPropertyNames(r);if(o.length!==s.length)return!1;for(var t=0;t<o.length;t++){var i=o[t];if(e[i]!==r[i])return!1}return!0}function areCookiesEqual(e,r){var o=e.sameSite===r.sameSite;return"string"==typeof e.sameSite&&"string"==typeof r.sameSite&&(o=e.sameSite.toLowerCase()===r.sameSite.toLowerCase()),hasSameProperties(__assign(__assign({},e),{sameSite:void 0}),__assign(__assign({},r),{sameSite:void 0}))&&o}function createCookie(e,r,o){var s=o.sameSite;!0===s&&(s="strict"),void 0!==s&&!1!==s||(s="lax");var t=__assign(__assign({},o),{sameSite:s});return delete t.encode,__assign({name:e,value:r},t)}function parseCookies(e,r){return e&&e.req&&e.req.headers&&e.req.headers.cookie?cookie.parse(e.req.headers.cookie,r):isBrowser()?cookie.parse(document.cookie,r):{}}function setCookie(e,r,o,s){if(e&&e.res&&e.res.getHeader&&e.res.setHeader){var t=e.res.getHeader("Set-Cookie")||[];"string"==typeof t&&(t=[t]),"number"==typeof t&&(t=[]);var i=setCookieParser.parse(t),a=[];i.forEach((function(e){areCookiesEqual(e,createCookie(r,o,s))||a.push(cookie.serialize(e.name,e.value,__assign({},e)))})),a.push(cookie.serialize(r,o,s)),e.res.finished||e.res.setHeader("Set-Cookie",a)}if(isBrowser()){if(s&&s.httpOnly)throw new Error("Can not set a httpOnly cookie in the browser.");document.cookie=cookie.serialize(r,o,s)}return{}}function destroyCookie(e,r,o){var s=__assign(__assign({},o||{}),{maxAge:-1});if(e&&e.res&&e.res.setHeader&&e.res.getHeader){var t=e.res.getHeader("Set-Cookie")||[];"string"==typeof t&&(t=[t]),"number"==typeof t&&(t=[]),t.push(cookie.serialize(r,"",s)),e.res.setHeader("Set-Cookie",t)}return isBrowser()&&(document.cookie=cookie.serialize(r,"",s)),{}}exports.parseCookies=parseCookies,exports.setCookie=setCookie,exports.destroyCookie=destroyCookie,exports.default={set:setCookie,get:parseCookies,destroy:destroyCookie};
//# sourceMappingURL=index.min.js.map